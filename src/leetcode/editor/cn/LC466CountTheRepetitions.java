package leetcode.editor.cn;
//ç”± n ä¸ªè¿æ¥çš„å­—ç¬¦ä¸² s ç»„æˆå­—ç¬¦ä¸² Sï¼Œè®°ä½œ S = [s,n]ã€‚ä¾‹å¦‚ï¼Œ["abc",3]=â€œabcabcabcâ€ã€‚ 
//
// å¦‚æœæˆ‘ä»¬å¯ä»¥ä» s2 ä¸­åˆ é™¤æŸäº›å­—ç¬¦ä½¿å…¶å˜ä¸º s1ï¼Œåˆ™ç§°å­—ç¬¦ä¸² s1 å¯ä»¥ä»å­—ç¬¦ä¸² s2 è·å¾—ã€‚ä¾‹å¦‚ï¼Œæ ¹æ®å®šä¹‰ï¼Œ"abc" å¯ä»¥ä» â€œabdbecâ€ è·å¾—
//ï¼Œä½†ä¸èƒ½ä» â€œacbbeâ€ è·å¾—ã€‚ 
//
// ç°åœ¨ç»™ä½ ä¸¤ä¸ªéç©ºå­—ç¬¦ä¸² s1 å’Œ s2ï¼ˆæ¯ä¸ªæœ€å¤š 100 ä¸ªå­—ç¬¦é•¿ï¼‰å’Œä¸¤ä¸ªæ•´æ•° 0 â‰¤ n1 â‰¤ 106 å’Œ 1 â‰¤ n2 â‰¤ 106ã€‚ç°åœ¨è€ƒè™‘å­—ç¬¦ä¸² S
//1 å’Œ S2ï¼Œå…¶ä¸­ S1=[s1,n1] ã€S2=[s2,n2] ã€‚ 
//
// è¯·ä½ æ‰¾å‡ºä¸€ä¸ªå¯ä»¥æ»¡è¶³ä½¿[S2,M] ä» S1 è·å¾—çš„æœ€å¤§æ•´æ•° M ã€‚ 
//
// 
//
// ç¤ºä¾‹ï¼š 
//
// è¾“å…¥ï¼š
//s1 ="acb",n1 = 4
//s2 ="ab",n2 = 2
//
//è¿”å›ï¼š
//2
// 
// Related Topics åŠ¨æ€è§„åˆ’ 
// ğŸ‘ 139 ğŸ‘ 0

public class LC466CountTheRepetitions {
    public static void main(String[] args) {
        Solution solution = new LC466CountTheRepetitions().new Solution();
    }

    //leetcode submit region begin(Prohibit modification and deletion)
    class Solution {
        public int getMaxRepetitions(String s1, int n1, String s2, int n2) {
            int len1 = s1.length();
            int len2 = s2.length();
            //ç‰¹åˆ¤
            if (len1 == 0 || len2 == 0 || n1 == 0 || n2 == 0) {
                return 0;
            }
            char[] chars1 = s1.toCharArray();
            char[] chars2 = s2.toCharArray();
            //è®°å½•ä¸‹ä¸€ä¸ªè¦åŒ¹é…çš„s2ä¸­å­—ç¬¦çš„ä¸‹æ ‡
            int index2 = 0;
            //è®°å½•s2å¾ªç¯çš„æ¬¡æ•°ï¼ŒloopTImesOnS2æ˜¯index2çš„å‡½æ•°
            int loopTimesOnS2 = 0;
            //å½“s1å¾ªç¯äº†iæ¬¡ä»¥åï¼Œs2å¾ªç¯äº†å‡ æ¬¡
            int[] times = new int[n1];
            //å½“s1å¾ªç¯äº†iæ¬¡ä»¥åï¼Œs2ä¸‹ä¸€ä¸ªå­—ç¬¦åŒ¹é…çš„ä¸‹æ ‡ï¼ˆä¸Šä¸€ä¸ªå­—ç¬¦åŒ¹é…å®Œä»¥åæ˜¯index2++,æ‰€æœ‰è¿™é‡Œæ˜¯ä¸‹ä¸€ä¸ªï¼‰
            int[] next = new int[n1];

            //æš´åŠ›è§£æ³•ä¼˜åŒ–ï¼Œä¸€è¾¹éå†ï¼Œä¸€è¾¹æ‰¾å‡ºå¾ªç¯èŠ‚ï¼Œæ‰¾åˆ°å°±ç›´æ¥è®¡ç®—ç»“æœ
            for (int i = 0; i < n1; i++) {
                //æŒ‡é’ˆindex1åœ¨s1ä¸Šå¾ªç¯æ¸¸èµ°
                for (int index1 = 0; index1 < len1; index1++) {
                    //å¦‚æœåŒ¹é…åˆ°s2ä¸­çš„å­—ç¬¦
                    if (chars1[index1] == chars2[index2]) {
                        index2++;
                    }
                    //åŒ¹é…å®Œä¸€ä¸ªs2,è®¡æ•°å™¨+1ï¼Œé‡ç½®s2ä¸‹æ ‡
                    if (index2 == len2) {
                        //å¾ªç¯æ‰«æï¼Œå› æ­¤index2é‡ç½®ä¸º0
                        index2 = 0;
                        loopTimesOnS2++;
                    }
                }
                //è®°å½•äº†s1éå†iæ¬¡åï¼ˆä»0å¼€å§‹ï¼‰ï¼Œs2å·²ç»å®Œæ•´éå†äº†å¤šå°‘æ¬¡
                times[i] = loopTimesOnS2;
                //è®°å½•äº†s1éå†äº†iæ¬¡ä»¥åï¼ˆä»0å¼€å§‹ï¼‰ï¼Œs2ä¸Šindex2çš„ä½ç½®ã€‚
                //ç”±äºåŒ¹é…å®Œæˆåæ‰§è¡Œäº†index2++,æ‰€ä»¥æ­¤æ—¶index2æŒ‡å‘ä¸‹ä¸€ä¸ªè¦åŒ¹é…çš„å­—ç¬¦
                next[i] = index2;
                //å¾ªç¯èŠ‚ä¸€å®šæ˜¯åœ¨ï¼šs1è‡³å°‘å¾ªç¯äº†ä¸€æ¬¡ä»¥å
                //s2å³å°†åŒ¹é…çš„å­—ç¬¦ä¸‹æ ‡æ°å¥½ç­‰äºs1åˆšåˆšå¾ªç¯ä¸€æ¬¡ä»¥åï¼Œs2å³å°†è¦åŒ¹é…çš„ä¸‹æ ‡ï¼Œå°±æ˜¯index2==next[0]çš„å«ä¹‰
                if (i > 0 && index2 == next[0]) {
                    //è¯´æ˜å‡ºç°äº†å¾ªç¯èŠ‚ï¼Œç›´æ¥è®¡ç®—ç»“æœï¼Œæ¥è‡ªä¸‰ä¸ªéƒ¨åˆ†

                    //ç¬¬ä¸€éƒ¨åˆ†
                    int headCount = times[0];

                    //ç¬¬äºŒéƒ¨åˆ†
                    // è¿™é‡Œéš¾ç†è§£çš„è¯ï¼Œä¸€å®šè¦ç»“åˆå®šä¹‰ï¼Œçœ‹å›¾ç†è§£ï¼Œ
                    // (n1 - 1)ï¼Œè¦å‡å» 1 ä¸ªï¼Œå› ä¸ºä» s1 å·²ç»å¾ªç¯äº†ä¸€æ¬¡å¼€å§‹ï¼Œæ‰å‡ºç°çš„å¾ªç¯èŠ‚
                    // (n1 - 1) / i è¡¨ç¤ºå‰©ä¸‹çš„éƒ¨åˆ†æœ‰å¤šå°‘ä¸ªçº¢è‰²å¤§æ‹¬å·æ®µï¼ˆè§å›¾ï¼‰
                    // times[i] - times[0] è¡¨ç¤ºï¼šæ¯ä¸ªå¾ªç¯èŠ‚é‡Œå‡ºç°äº†å‡ ä¸ª s2
                    // ((n1 - 1) / i) * (times[i] - times[0]) å°±è¡¨ç¤ºä¸­é—´é‚£éƒ¨åˆ†é‡Œé¢ s2 å‡ºç°çš„æ¬¡æ•°
                    int circulateCount = ((n1 - 1) / i) * (times[i] - times[0]);

                    // ç¬¬ ä¸‰ éƒ¨åˆ†ï¼šç»“å°¾éƒ¨åˆ†
                    // (n1 - 1) % i ç›¸å¯¹äº (n1 - 1) / i è€Œè¨€ï¼Œå°±æ˜¯ä¸èƒ½æ•´é™¤çš„éƒ¨åˆ†
                    // å‡å» times[0] æ˜¯å› ä¸ºè®¡ç®— times[i] çš„æ—¶å€™è®¡ç®—çš„æ˜¯å‰ç¼€å’Œï¼ŒheadCount è¿™éƒ¨åˆ†å·²ç»è®¡ç®—è¿‡äº†ï¼Œè¦æŠŠå®ƒåˆ æ‰ï¼ˆå†™æˆä¸¤éƒ¨åˆ†çš„å’Œä¹Ÿå¯ä»¥ï¼‰
                    int endCount = times[(n1 - 1) % i] - times[0];

                    //æ€»ç»“
                    //ä¸‰ä¸ªéƒ¨åˆ†ç›¸åŠ 
                    return (headCount + circulateCount + endCount) / n2;
                }
            }
            //èµ°åˆ°è¿™é‡Œï¼Œæ²¡æœ‰å‘ç°å¾ªç¯èŠ‚ï¼Œn1-1æ˜¯æœ€åä¸€æ¬¡éå†s1çš„ä¸‹æ ‡
            return times[n1 - 1] / n2;
        }

    }
//leetcode submit region end(Prohibit modification and deletion)

}





